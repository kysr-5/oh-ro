# MuJoCo 家居场景说明文档 (v2.3 - 轮式机器人)

## 场景概述

这是一个适用于 MuJoCo 3.4.0 的仿真家居场景,包含三个**完全相通**的房间:客厅、厨房和卧室。场景采用真实比例设计,空间宽敞,所有物体位置符合日常生活逻辑,光照柔和舒适。

### 连通性设计
- **客厅 ↔ 厨房**: 客厅左墙在 Y=-1 至 Y=1 位置有 2 米宽门洞
- **客厅 ↔ 卧室**: 客厅右墙在 Y=-1 至 Y=1 位置有 2 米宽门洞
- **自由通行**: 可从任意房间自由移动到其他房间,无障碍物阻挡

## 整体布局

```
         厨房 (Kitchen)          客厅 (Living Room)        卧室 (Bedroom)
    ┌─────────────────────┐   ┌───────────────────┐   ┌─────────────────────┐
    │                     │   │                   │   │                     │
    │  [冰箱]  [橱柜]    │◄──┤    [沙发]→       │──►│   [床]↑             │
    │                     │   │                   │   │                     │
    │  [餐桌 + 4椅]      │   │  [茶几]  [电视]  │   │ [衣柜]  [床头柜]   │
    │                     │   │                   │   │                     │
    └─────────────────────┘   └───────────────────┘   └─────────────────────┘
         6m x 5m                   7m x 6m                  5m x 5m
```

## 版本更新说明 (v2.3 - 轮式机器人)

### 最新改进 (v2.3):
✓ **添加可移动轮式机器人**: 添加带自由关节的轮式移动机器人
  - 圆柱形底盘 (直径 0.4m, 高 0.3m)
  - 传感器模块
  - 两个驱动轮和一个脚轮
  - freejoint 可在场景中自由移动
  - 总质量约 16.8 kg

### 早期版本改进:
✓ **降低光照**: 光源强度降低60%,环境更柔和舒适
✓ **修正沙发朝向**: 沙发现在正确面向电视
✓ **修正床朝向**: 床头板现在正确朝向后墙
✓ **修正椅子朝向**: 餐椅背靠全部朝外,围绕餐桌
✓ **简化门框**: 门框改为简单的横梁设计,更加合理
✓ **房间真正相通**: 客厅左右墙各有2米宽门洞,厨房和卧室可自由进出
✓ **扩大厨房空间**: 厨房从 5m×4m 扩大至 6m×5m (扩大 50%)
✓ **扩大客厅和卧室**: 客厅 7m×6m、卧室 5m×5m
✓ **增加家具**: 厨房增加至 4 把椅子,卧室增加装饰花瓶

## 坐标系统

- **X 轴**: 左右方向 (厨房在负方向 X=-6.5 至 -3.5,卧室在正方向 X=3.5 至 6)
- **Y 轴**: 前后方向 (客厅前墙 Y=-3,客厅后墙 Y=3;厨房前后墙 Y=±2.5)
- **Z 轴**: 垂直方向 (地面为 Z=0,天花板约 Z=2.4)
- **原点**: 位于客厅中心

## 房间详细描述

### 1. 客厅 (Living Room)
**位置**: 场景中心 (X: -3.5 至 3.5, Y: -3 至 3)
**面积**: 7m × 6m (扩大 75%)
**特点**: 作为连接厨房和卧室的中心区域,宽敞舒适

#### 墙壁结构:
- 后墙: 完整墙面 (Y=3)
- 前墙: 完整墙面 (Y=-3)
- 左墙: 分段墙面,**中间 2m 宽门洞通往厨房** (Y=-1 至 Y=1 为开放通道)
  - 上段: Y=1 至 Y=3
  - 下段: Y=-3 至 Y=-1
- 右墙: 分段墙面,**中间 2m 宽门洞通往卧室** (Y=-1 至 Y=1 为开放通道)
  - 上段: Y=1 至 Y=3
  - 下段: Y=-3 至 Y=-1
- 门框: 简化为顶部横梁设计

#### 主要家具:
- **沙发** (0, 0.5, 0.2): 面向电视,蓝色布艺,带扶手,尺寸 2.4m×1m×0.7m
- **茶几** (0, -0.8, 0.2): 沙发前方,木质四腿,尺寸 1.2m×0.8m×0.4m
- **电视柜** (0, -2.5, 0.3): 靠前墙,深色木质,尺寸 2m×0.5m×0.6m
- **电视** (0, -2.5, 0.75): 放置在电视柜上,尺寸 1.2m×0.1m×0.7m

#### 装饰物:
- 花瓶 (茶几上,0.3, -0.8, 0.42)
- 垃圾桶 (角落,2.8, 2.5, 0.15)
- 地毯 (中央,3m×2.4m)

#### 机器人:
- **轮式移动机器人** (1.5, 0, 0.15): 圆柱形底盘,带自由关节可在场景中移动
  - 底盘直径: 0.4m (半径 0.2m)
  - 高度: 0.3m
  - 传感器模块高度: 0.1m
  - 两个侧面驱动轮 (直径 0.08m)
  - 一个后部脚轮 (直径 0.06m)
  - freejoint 可自由移动
  - 总质量: 约 16.8 kg

### 2. 厨房 (Kitchen)
**位置**: 客厅左侧 (X: -6.5 至 -3.5, Y: -2.5 至 2.5)
**面积**: 6m × 5m (扩大 50%)
**连接**: 通过 2m 宽门洞与客厅相通

#### 墙壁结构:
- 左墙: 完整封闭 (X=-6.5)
- 后墙: 完整封闭 (Y=2.5)
- 前墙: 完整封闭 (Y=-2.5)
- 右墙: **开放式连接客厅** - 通过客厅左墙的门洞相通 (Y=-1 至 Y=1)

#### 主要设施:
- **冰箱** (-6, 0.8, 0.85): 靠左墙,银色金属,尺寸 0.7m×0.7m×1.7m
- **橱柜台面** (-5.6, 1.8, 0.45): 靠后墙,带金属台面,尺寸 1.4m×0.8m×0.9m
- **餐桌** (-5, -0.3, 0.37): 厨房中央,圆形木质桌面,直径约 1.6m×1.4m
- **餐椅** × 4: 围绕餐桌四周摆放,背靠朝外,间距充足

#### 其他物品:
- 垃圾桶 (-6, -2.1, 0.2)

### 3. 卧室 (Bedroom)
**位置**: 客厅右侧 (X: 3.5 至 6, Y: -2.5 至 2.5)
**面积**: 5m × 5m (扩大 56%)
**连接**: 通过 2m 宽门洞与客厅相通

#### 墙壁结构:
- 右墙: 完整封闭 (X=6)
- 后墙: 完整封闭 (Y=2.5)
- 前墙: 完整封闭 (Y=-2.5)
- 左墙: **开放式连接客厅** - 通过客厅右墙的门洞相通 (Y=-1 至 Y=1)

#### 主要家具:
- **床** (5.0, 1.6, 0.3): 靠后墙,床头板朝向后墙,带床垫、床架和床头板,尺寸 1.5m×2m×0.8m
- **衣柜** (5.5, -1.2, 1.0): 侧墙,大型储物柜,尺寸 0.7m×1.8m×2m
- **床头柜** (4.0, 1.6, 0.3): 床左侧,尺寸 0.5m×0.5m×0.6m
- **台灯** (4.0, 1.6, 0.65): 完整结构 (底座、支柱、灯罩),高度约 0.5m

#### 装饰物:
- 盆栽植物 (床头柜上,3.8, 1.8, 0.63)
- 装饰花瓶 (5.5, 0.5, 0.55)
- 垃圾桶 (角落,5.5, -2.1, 0.15)

## 关键物体清单

### 结构元素 (总计: 13 项)
| 物体名称 | 类型 | 位置 (X, Y, Z) | 尺寸 | 说明 |
|---------|------|----------------|------|------|
| floor | 地板平面 | (0, 0, 0) | 30m × 30m | 浅棕色地板 |
| living_wall_back | 客厅后墙 | (0, 3, 1.2) | 7m × 0.2m × 2.4m | 完整墙面 |
| living_wall_front | 客厅前墙 | (0, -3, 1.2) | 7m × 0.2m × 2.4m | 完整墙面 |
| living_wall_left_upper | 客厅左上墙 | (-3.5, 2, 1.2) | 0.2m × 2m × 2.4m | 门洞上方 (Y=1至3) |
| living_wall_left_lower | 客厅左下墙 | (-3.5, -2, 1.2) | 0.2m × 2m × 2.4m | 门洞下方 (Y=-3至-1) |
| living_wall_right_upper | 客厅右上墙 | (3.5, 2, 1.2) | 0.2m × 2m × 2.4m | 门洞上方 (Y=1至3) |
| living_wall_right_lower | 客厅右下墙 | (3.5, -2, 1.2) | 0.2m × 2m × 2.4m | 门洞下方 (Y=-3至-1) |
| kitchen_wall_left | 厨房左墙 | (-6.5, 0, 1.2) | 0.2m × 5m × 2.4m | 外墙完整 |
| kitchen_wall_back | 厨房后墙 | (-5, 2.5, 1.2) | 3m × 0.2m × 2.4m | 完整墙面 |
| kitchen_wall_front | 厨房前墙 | (-5, -2.5, 1.2) | 3m × 0.2m × 2.4m | 完整墙面 |
| bedroom_wall_right | 卧室右墙 | (6.0, 0, 1.2) | 0.2m × 5m × 2.4m | 外墙完整 |
| bedroom_wall_back | 卧室后墙 | (4.75, 2.5, 1.2) | 2.5m × 0.2m × 2.4m | 完整墙面 |
| bedroom_wall_front | 卧室前墙 | (4.75, -2.5, 1.2) | 2.5m × 0.2m × 2.4m | 完整墙面 |

**注意**: 厨房和卧室各缺一面墙,通过客厅的门洞实现房间连通。门框作为可选装饰元素。

### 客厅家具 (总计: 6 项)
| 物体名称 | 类型 | 位置 (X, Y, Z) | 尺寸 (长×宽×高) | 质量 | 朝向 |
|---------|------|----------------|----------------|------|------|
| sofa | 沙发 | (0, 0.5, 0.2) | 2.4m × 1.0m × 0.7m | 50 kg | 面向电视(负Y方向) |
| coffee_table | 茶几 | (0, -0.8, 0.2) | 1.2m × 0.8m × 0.4m | 19 kg | - |
| tv_cabinet | 电视柜 | (0, -2.5, 0.3) | 2.0m × 0.5m × 0.6m | 40 kg | - |
| tv | 电视 | (0, -2.5, 0.75) | 1.2m × 0.1m × 0.7m | 8 kg | - |
| vase_living | 花瓶 | (0.3, -0.8, 0.42) | 直径0.12m × 高0.3m | 1 kg | - |
| trash_living | 垃圾桶 | (2.8, 2.5, 0.15) | 直径0.24m × 高0.3m | 1 kg | - |

### 移动机器人 (总计: 1 项)
| 物体名称 | 类型 | 位置 (X, Y, Z) | 尺寸 | 质量 | 说明 |
|---------|------|----------------|------|------|------|
| robot | 轮式移动机器人 | (1.5, 0, 0.15) | 直径0.4m × 高0.3m | ~16.8 kg | freejoint可移动,带两个驱动轮和脚轮 |

### 厨房家具与设施 (总计: 8 项)
| 物体名称 | 类型 | 位置 (X, Y, Z) | 尺寸 (长×宽×高) | 质量 |
|---------|------|----------------|----------------|------|
| kitchen_counter | 橱柜台面 | (-5.6, 1.8, 0.45) | 1.4m × 0.8m × 0.9m | 60 kg |
| refrigerator | 冰箱 | (-6, 0.8, 0.85) | 0.7m × 0.7m × 1.7m | 80 kg |
| dining_table | 餐桌 | (-5, -0.3, 0.37) | 1.6m × 1.4m × 0.74m | 30 kg |
| chair1 | 餐椅1 | (-5, 0.6, 0.22) | 0.44m × 0.44m × 0.85m | 7.5 kg |
| chair2 | 餐椅2 | (-5, -1.2, 0.22) | 0.44m × 0.44m × 0.85m | 7.5 kg |
| chair3 | 餐椅3 | (-5.9, -0.3, 0.22) | 0.44m × 0.44m × 0.85m | 7.5 kg |
| chair4 | 餐椅4 | (-4.1, -0.3, 0.22) | 0.44m × 0.44m × 0.85m | 7.5 kg |
| trash_kitchen | 垃圾桶 | (-6, -2.1, 0.2) | 直径0.3m × 高0.4m | 1.5 kg |

### 卧室家具 (总计: 7 项)
| 物体名称 | 类型 | 位置 (X, Y, Z) | 尺寸 (长×宽×高) | 质量 |
|---------|------|----------------|----------------|------|
| bed | 床 | (5.0, 1.6, 0.3) | 1.6m × 2.1m × 0.9m | 85 kg |
| wardrobe | 衣柜 | (5.5, -1.2, 1.0) | 0.7m × 1.8m × 2.0m | 100 kg |
| nightstand | 床头柜 | (4.0, 1.6, 0.3) | 0.5m × 0.5m × 0.6m | 10 kg |
| lamp | 台灯 | (4.0, 1.6, 0.65) | 直径0.18m × 高0.5m | 1 kg |
| plant_bedroom | 盆栽植物 | (3.8, 1.8, 0.63) | 直径0.2m × 高0.18m | 0.6 kg |
| vase_bedroom | 装饰花瓶 | (5.5, 0.5, 0.55) | 直径0.1m × 高0.24m | 0.8 kg |
| trash_bedroom | 垃圾桶 | (5.5, -2.1, 0.15) | 直径0.24m × 高0.3m | 0.8 kg |

### 装饰物品 (总计: 1 项)
| 物体名称 | 类型 | 位置 (X, Y, Z) | 尺寸 | 说明 |
|---------|------|----------------|------|------|
| rug | 地毯 | (0, -0.3, 0.01) | 3m × 2.4m | 客厅装饰,无碰撞 |

## 物理属性设置

### 材质系统
- **wood** (木质): 棕色 (0.6, 0.4, 0.2),用于桌子、椅子等
- **darkwood** (深色木质): 深棕色 (0.4, 0.2, 0.1),用于电视柜、床架等
- **fabric** (布艺): 蓝灰色 (0.3, 0.3, 0.5),用于沙发、床垫等
- **metal** (金属): 银灰色 (0.7, 0.7, 0.75),用于冰箱、台面等
- **ceramic** (陶瓷): 浅色 (0.9, 0.9, 0.95),用于花瓶、花盆等
- **plastic** (塑料): 深灰色 (0.2, 0.2, 0.2),用于垃圾桶、电视等
- **wall** (墙面): 浅色 (0.95, 0.95, 0.9),所有墙壁
- **floor** (地板): 浅棕色 (0.8, 0.8, 0.7),地面

### 碰撞设置
- 所有家具和墙壁均启用碰撞检测 (`contype="1" conaffinity="1"`)
- 装饰性元素(地毯)禁用碰撞 (`contype="0" conaffinity="0"`)
- 重力加速度: -9.81 m/s²

### 照明系统 (柔和设置)
- **主光源**: 顶部漫射光 (0, 0, 4),强度 0.3
- **辅助光源1**: 右上方 (4, 4, 3),强度 0.2
- **辅助光源2**: 左下方 (-4, -4, 3),强度 0.2
- **头灯**: 环境光 0.3,漫射光 0.4,镜面反射 0.05

总体光照强度降低约 60%,营造温馨舒适的室内氛围。

## 使用说明

### 1. 加载场景
在 MuJoCo 3.4.0 中运行:
```bash
python -m mujoco.viewer --mjcf=home_scene.xml
```

或在 Python 代码中:
```python
import mujoco
import mujoco.viewer

model = mujoco.MjModel.from_xml_path("home_scene.xml")
data = mujoco.MjData(model)
mujoco.viewer.launch(model, data)
```

### 2. 推荐视角
- **全景视角**: 位置 (0, -8, 5),朝向 (0, 0, 0)
- **客厅视角**: 位置 (0, 0, 1.6),朝向电视
- **厨房视角**: 位置 (-5, 0, 1.6)
- **卧室视角**: 位置 (4.75, 0, 1.6)
- **俯视图**: 位置 (0, 0, 12),朝向 (0, 0, -1)

### 3. 场景特点
✓ **真实比例**: 所有物体尺寸符合实际家居标准
✓ **逻辑布局**: 家具摆放符合日常使用习惯
✓ **房间完全相通**: 客厅左右墙各有2米宽门洞,可自由通行至厨房和卧室
✓ **宽敞舒适**: 家具之间留有充足的活动空间
✓ **物理仿真**: 所有物体具有真实质量和碰撞属性
✓ **柔和光照**: 适合长时间观察的舒适照明

### 4. 扩展建议
- 场景已包含轮式移动机器人,可用于导航和路径规划测试
- 可添加可抓取的小物体(杯子、书籍、遥控器等)
- 可添加窗户几何体和室外环境
- 可添加可开合的门扇(需要 hinge 关节)
- 可添加更多装饰物品丰富场景细节
- 可替换为双足人形机器人进行更复杂的机器人任务

### 5. 移动机器人使用建议
轮式移动机器人带有 freejoint,可以在场景中自由移动:

#### 适用任务:
- **自主导航**: 在三个房间之间进行路径规划和导航
- **避障**: 测试避障算法和传感器
- **探索**: 自主探索和地图构建
- **物体运输**: 携带物体在房间间移动

#### 物理特性:
- **底盘**: 圆柱形,直径 0.4m,高度 0.3m
- **驱动轮**: 两个侧面轮,直径 0.08m
- **脚轮**: 后部球形脚轮,直径 0.06m
- **传感器模块**: 顶部圆柱形模块
- **前部指示器**: 蓝色盒形指示器标识前进方向
- **总质量**: 约 16.8 kg

### 6. 导航测试建议
由于房间现在更宽敞,适合进行:
- 移动机器人自主导航
- 路径规划算法测试
- 避障行为验证
- 多房间探索任务
- 物体搜索与定位

## 技术规格

- **MuJoCo 版本**: 3.4.0
- **文件格式**: XML (MJCF)
- **坐标系**: 局部坐标系
- **单位**: 米 (m)、千克 (kg)、秒 (s)
- **角度单位**: 度 (degree,编译器设置)
- **时间步长**: 0.002 秒
- **总物体数量**: 约 29 个独立 body
- **总几何体数量**: 约 70 个 geom
- **总房间面积**: 104 平方米 (客厅42㎡ + 厨房30㎡ + 卧室25㎡ + 连接区7㎡)
- **门洞宽度**: 2 米 (客厅至厨房/卧室)
- **机器人**: 轮式移动机器人 (freejoint,总质量 ~16.8 kg)

## 性能说明

- 轻量级场景,适合实时仿真
- 在标准硬件上可达 500+ FPS
- 碰撞检测高效,适合长时间运行
- 内存占用 < 10 MB

## 维护记录

| 版本 | 日期 | 修改内容 |
|------|------|----------|
| 1.0 | 2026-01-15 | 初始版本创建 |
| 2.0 | 2026-01-15 | 降低光照强度,修正沙发朝向,简化门框,封闭墙壁,扩大房间尺寸 |
| 2.1 | 2026-01-15 | 修正墙壁门洞位置,确保三个房间真正相通,可自由通行 |
| 2.2 | 2026-01-15 | 修正床头朝向,修正餐椅朝向,扩大厨房空间至6m×5m |
| 2.3 | 2026-01-15 | 添加可移动轮式机器人,带freejoint可在场景中自由移动 |

## 已知问题

无

## 联系方式

如需修改或扩展场景,可以编辑 `home_scene.xml` 文件中的相应部分。建议在修改前备份原文件。
